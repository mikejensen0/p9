<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prototype</title>
</head>
<body>
    <div class="main-container">
        <div class="top-bar-container">
            <div id="countdown">&nbsp;</div>
        </div>
        <div class="window-container">
            <!-- Window 1: Chat Window -->
            <div class="window">
                <div class="header">Ai</div>
                <div id="displayMessages"></div>
                    <div class="input-container">
                        <textarea type="text" id="messageInput" placeholder="Enter a message"></textarea>
                    <div class="sendandresbutton">
                        <button onclick="sendAndRecieveMessageAi()">Send</button>
                        <button class="secondbutton" onclick="resetChatFromButton()">Reset chat</button>
                    </div>
                </div>
            </div>

            <!-- Container for vertical alignment -->
            <div class="sub-container"> 
                <!-- Window 2: Code Submission Window -->
                <div class="window">
                    <div class="tab">
                        <button class="tasksTab active" onclick="toggleTasksCode('tasks')">Tasks</button>
                        <button class="codeTab" onclick="toggleTasksCode('code')">Code</button>
                    </div>
                    <div class="selectedTab-container">
                        <div class="active" id="task-container"></div>
                        <div id="code-container">
                            <div class="line-numbers" id="lineNumbers"></div>
                            <textarea id="code" style="resize: none;" placeholder="Write your code here" oninput="updateLineNumbers()" onscroll="syncScroll()"></textarea>
                        </div>
                    </div>
                </div>
                
                <!-- Window 3: Test Results Window -->
                <div class="window">
                    <div class="header">Test Results</div>
                    <div class="testResults-container" id="testResults"></div>
                </div>
            </div>
        </div>
        <div class="bottom-bar-container">
            <div class="bottom-button-container">
                <button id="buttonRunTests" onclick="submitUserCode()">Run Tests</button>
                <button id="buttonNextTask" onclick="nextTask()">Next Task</button>
            </div>
        </div>
    </div>
    <div id="beginTask" className="beginTaskPrompt">
        Are you ready for the next task?
        <button onclick="beginTask()">Begin Task</button>
    </div> 
</body>
<link rel="stylesheet" href="{{url_for('static', filename='style.css')}}">
<script src="{{url_for('static', filename='client.js')}}"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>setInitialTask(taskIds)</script>
</html>